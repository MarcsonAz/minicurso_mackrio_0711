caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI'"
) +
theme_light() # Um tema um pouco diferente
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
# Usar 'group = pais' garante que o R desenhe uma linha para cada país
geom_line(aes(group = pais), linewidth = 1.2) +
geom_point(size = 2) + # Adiciona pontos em cada ano
# Formatar o eixo Y para mostrar como dólar
scale_y_continuous(labels = scales::dollar_format()) +
scale_color_discrete() +
labs(
title = "PIB per capita (USD Corrente)",
subtitle = "Comparação internacional (2000-2023)",
y = "PIB per capita (USD)",
x = "Ano",
color = "País", # Legenda
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI'"
) +
theme_light()
?scale_color_discrete
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
# Usar 'group = pais' garante que o R desenhe uma linha para cada país
geom_line(aes(group = pais), linewidth = 1.2) +
geom_point(size = 2) + # Adiciona pontos em cada ano
# Formatar o eixo Y para mostrar como dólar
scale_y_continuous(labels = scales::dollar_format()) +
scale_fill_brewer(palette = "Dark2") +
labs(
title = "PIB per capita (USD Corrente)",
subtitle = "Comparação internacional (2000-2023)",
y = "PIB per capita (USD)",
x = "Ano",
color = "País", # Legenda
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI'"
) +
theme_light()
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
# Usar 'group = pais' garante que o R desenhe uma linha para cada país
geom_line(aes(group = pais), linewidth = 1.2) +
geom_point(size = 2) + # Adiciona pontos em cada ano
# Formatar o eixo Y para mostrar como dólar
scale_y_continuous(labels = scales::dollar_format()) +
scale_color_brewer(palette = "Dark2") +
labs(
title = "PIB per capita (USD Corrente)",
subtitle = "Comparação internacional (2000-2023)",
y = "PIB per capita (USD)",
x = "Ano",
color = "País", # Legenda
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI'"
) +
theme_light()
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
# Usar 'group = pais' garante que o R desenhe uma linha para cada país
geom_line(aes(group = pais), linewidth = 1.2) +
geom_point(size = 2) + # Adiciona pontos em cada ano
# Formatar o eixo Y para mostrar como dólar
scale_y_continuous(labels = scales::dollar_format()) +
scale_color_brewer(palette = "Paired") +
labs(
title = "PIB per capita (USD Corrente)",
subtitle = "Comparação internacional (2000-2023)",
y = "PIB per capita (USD)",
x = "Ano",
color = "País", # Legenda
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI'"
) +
theme_light()
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
# Usar 'group = pais' garante que o R desenhe uma linha para cada país
geom_line(aes(group = pais), linewidth = 1.2) +
geom_point(size = 2) + # Adiciona pontos em cada ano
# Formatar o eixo Y para mostrar como dólar
scale_y_continuous(labels = scales::dollar_format()) +
scale_color_brewer(palette = "Set1") +
labs(
title = "PIB per capita (USD Corrente)",
subtitle = "Comparação internacional (2000-2023)",
y = "PIB per capita (USD)",
x = "Ano",
color = "País", # Legenda
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI'"
) +
theme_light()
unique(pib_tratado$pais)
library(dplyr)
library(ggplot2)
library(lubridate)
dados_brutos_ipca <- readxl::read_excel('C:\\mark\\projetos\\oficina_r_mackrio\\tabela1737.xlsx',
col_types = "text")
View(dados_brutos_ipca)
dados_tratados_ipca <- dados_brutos_ipca %>%
slice(-c(1:3,n())) %>%
rename(ano_mes = 1,valor = 2) %>%
# Converter a string "202304" para um formato de data real
# ym() do lubridate entende "AnoMês"
mutate(data = ym(ano_mes)) %>%
# Garantir que o valor é numérico (às vezes vem como character)
mutate(valor = as.numeric(valor)) %>%
# Remover qualquer linha que não tenha data ou valor
filter(!is.na(data), !is.na(valor)) %>%
# Ordenar pela data, essencial para cálculos de série temporal
arrange(data)
View(dados_tratados_ipca)
ggplot(dados_tratados_ipca, aes(x = data, y = valor)) +
geom_line() +
labs(
title = "Inflação Acumulada em 12 Meses (IPCA)",
caption = "Fonte: IBGE (SIDRA) | Tabela 1737"
) +
theme_minimal()
ggplot(dados_tratados_ipca, aes(x = data, y = valor)) +
geom_line(color = "darkred", linewidth = 1) +
geom_hline(yintercept = 0, linetype = "dashed", color = "gray") +
# Adicionar linhas de meta de inflação (ex: 3% e 4.5%)
geom_hline(yintercept = 3.0, linetype = "dotted", color = "blue") +
geom_hline(yintercept = 4.5, linetype = "dotted", color = "blue") +
labs(
title = "Inflação Acumulada em 12 Meses (IPCA)",
subtitle = "Período: outubro de 2023 a setembro de 2025",
y = "Acumulado 12 Meses (%)",
x = "Data",
caption = "Fonte: IBGE (SIDRA) | Tabela 1737"
) +
theme_minimal()
View(dados_tratados_ipca)
dados_brutos_pib <- readxl::read_excel('C:\\mark\\projetos\\oficina_r_mackrio\\dados_pib_banco_mundial.xlsx',
col_types = "text")
pib_tratado <- dados_brutos_pib %>%
# Renomear colunas para facilitar (e traduzir)
rename(
pais = country,
ano = year,
pib_per_capita = NY.GDP.PCAP.CD
) %>%
# Remover anos/países onde o dado não estava disponível
filter(!is.na(pib_per_capita)) %>%
# Garantir que o ano e o pib são tratados como números
mutate(ano = as.numeric(ano),
pib_per_capita = as.numeric(pib_per_capita))
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
geom_line(aes(group = pais)) +
geom_point() +
labs(
title = "PIB per capita (USD Corrente)",
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI' | indicador NY.GDP.PCAP.CD"
) +
theme_minimal()
ggplot(pib_tratado, aes(x = ano, y = pib_per_capita, color = pais)) +
# Usar 'group = pais' garante que o R desenhe uma linha para cada país
geom_line(aes(group = pais), linewidth = 1.2) +
geom_point(size = 2) + # Adiciona pontos em cada ano
# Formatar o eixo Y para mostrar como dólar
scale_y_continuous(labels = scales::dollar_format()) +
scale_color_brewer(palette = "Set1") +
labs(
title = "PIB per capita (USD Corrente)",
subtitle = "Comparação internacional (2000-2023)",
y = "PIB per capita (USD)",
x = "Ano",
color = "País", # Legenda
caption = "Fonte: Banco Mundial (WDI) | Pacote R 'WDI' | indicador NY.GDP.PCAP.CD"
) +
theme_light()
library(dplyr)
library(ggplot2)
library(lubridate)
library(stringr)
api_pnad <- "/t/6318/n1/1/n3/1,2,3,4,5/v/4099/p/last%2030/d/v4099%201"
dados_brutos_pnad <- sidra::get_sidra(api = api_pnad)
api_pnad <- "/t/6318/n1/1/n3/1,2,3,4,5/v/4099/p/last%2030/d/v4099%201"
dados_brutos_pnad <- sidrar::get_sidra(api = api_pnad)
api_pnad <- "/t/4093"
dados_brutos_pnad <- sidrar::get_sidra(api = api_pnad)
api_pnad <- "/t/4093/20223"
dados_brutos_pnad <- sidrar::get_sidra(api = api_pnad)
api_pnad <- "/t/4093/202203"
dados_brutos_pnad <- sidrar::get_sidra(api = api_pnad)
api_pnad <- "t/4093/n2/all/v/4099/p/all/c2/6794/d/v4099 1/l/v,c2,t+p"
dados_brutos_pnad <- sidrar::get_sidra(api = api_pnad)
api_pnad <- "t/4093/n2/all/v/4099/p/all/c2/6794/d/v4099"
dados_brutos_pnad <- sidrar::get_sidra(api = api_pnad)
dados_brutos_pnad <- readxl::read_excel('C:\\mark\\projetos\\oficina_r_mackrio\\tabela4093.xlsx',
col_types = "text")
View(dados_brutos_pnad)
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "202201" (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, 1, 1)),
tri = as.numeric(str_sub(trimestre_str, -4, -1)))
View(pnad_limpo)
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, mes, 1) # Função do lubridate
) %>%
# Remover NAs que podem ter sido gerados
filter(!is.na(taxa_desemprego), !is.na(data)) %>%
# Vamos filtrar para o gráfico não ficar muito poluído
# Manteremos Brasil, Nordeste e Sudeste para comparar
filter(regiao %in% c("Brasil", "Nordeste", "Sudeste"))
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
) %>%
# Remover NAs que podem ter sido gerados
filter(!is.na(taxa_desemprego), !is.na(data)) %>%
# Vamos filtrar para o gráfico não ficar muito poluído
# Manteremos Brasil, Nordeste e Sudeste para comparar
filter(regiao %in% c("Brasil", "Nordeste", "Sudeste"))
# observar dados parciais para identificar dados baixados
dplyr::tibble(head(pnad_limpo))
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
)
View(pnad_limpo)
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
) %>%
# preencher valores da regiao
fill(regiao)
library(dplyr)
library(ggplot2)
library(lubridate)
library(stringr)
library(tidyr)
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
) %>%
# preencher valores da regiao - tidyr::fill()
fill(regiao)
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
) %>%
# preencher valores da regiao - tidyr::fill()
fill(regiao) %>%
# Remover NAs que podem ter sido gerados
filter(!is.na(taxa_desemprego), !is.na(data)) %>%
# Vamos filtrar para o gráfico não ficar muito poluído
# Manteremos Brasil, Nordeste e Sudeste para comparar
filter(regiao %in% c("Brasil", "Nordeste", "Sudeste"))
View(pnad_limpo)
dados_brutos_pnad <- readxl::read_excel('C:\\mark\\projetos\\oficina_r_mackrio\\tabela4093.xlsx',
col_types = "text")
library(dplyr)
library(ggplot2)
library(lubridate)
library(stringr)
library(tidyr)
dados_brutos_pnad <- readxl::read_excel('C:\\mark\\projetos\\oficina_r_mackrio\\tabela4093.xlsx',
col_types = "text")
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
) %>%
# preencher valores da regiao - tidyr::fill()
fill(regiao) %>%
# Remover NAs que podem ter sido gerados
filter(!is.na(taxa_desemprego), !is.na(data))
media_por_regiao <- pnad_limpo %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
View(pnad_limpo)
View(media_por_regiao)
media_por_regiao <- pnad_limpo %>%
filter(year(data) == '2025')
View(media_por_regiao)
media_por_regiao <- pnad_limpo %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
media_por_regiao_2025 <- pnad_limpo %>%
filter(year(data) == '2025') %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
print("Média do período:")
print(media_por_regiao)
print("Média em 2025:")
print(media_por_regiao)
print("Média do período:")
print(media_por_regiao)
print("---------------\n")
print("Média em 2025:")
print(media_por_regiao_2025)
media_por_regiao <- pnad_limpo %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
# Vamos calcular a taxa média de desemprego por região em 2025
media_por_regiao_2025 <- pnad_limpo %>%
filter(year(data) == '2025') %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
print("\n")
print("Tabela com a taxa média de desemprego\n")
df_media <- tibble(`Grande Região` = media_por_regiao$regiao,
`Média no período` = media_por_regiao$media_desemprego_periodo,
`Média em 2025` = media_por_regiao_2025$media_desemprego_periodo)
print(df_media)
print("---------------\n")
library(dplyr)
library(ggplot2)
library(lubridate)
library(stringr)
library(tidyr)
dados_brutos_pnad <- readxl::read_excel('C:\\mark\\projetos\\oficina_r_mackrio\\tabela4093.xlsx',
col_types = "text")
pnad_limpo <- dados_brutos_pnad %>%
slice(-c(1:3,n())) %>%
rename(regiao = 1,trimestre_str=2,taxa_desemprego=3) %>%
# Converter taxa para numérico
mutate(taxa_desemprego = as.numeric(taxa_desemprego)) %>%
# Converter a string "1ª Trimestre de 2025" Pegar (Ano + Trimestre) em uma data
mutate(
ano = as.numeric(str_sub(trimestre_str, -4, -1)),
tri = as.numeric(str_sub(trimestre_str, 1, 1)),
data = lubridate::make_date(ano, tri, 1) # Função do lubridate
) %>%
# preencher valores da regiao - tidyr::fill()
fill(regiao) %>%
# Remover NAs que podem ter sido gerados
filter(!is.na(taxa_desemprego), !is.na(data))
media_por_regiao <- pnad_limpo %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
# Vamos calcular a taxa média de desemprego por região em 2025
media_por_regiao_2025 <- pnad_limpo %>%
filter(year(data) == '2025') %>%
group_by(regiao) %>%
summarise(
media_desemprego_periodo = mean(taxa_desemprego, na.rm = TRUE)
)
print("Tabela com a taxa média de desemprego\n")
df_media <- tibble(`Grande Região` = media_por_regiao$regiao,
`Média no período` = media_por_regiao$media_desemprego_periodo,
`Média em 2025` = media_por_regiao_2025$media_desemprego_periodo)
print(df_media)
print("---------------")
ggplot(pnad_final_plot, aes(x = data, y = taxa_desemprego, color = regiao)) +
geom_line() +
labs(
title = "Taxa de Desocupação por Grande Região (PNAD Contínua)",
caption = "Fonte: IBGE (SIDRA) | Tabela 4093"
) +
theme_minimal()
pnad_final_plot <- pnad_limpo
ggplot(pnad_final_plot, aes(x = data, y = taxa_desemprego, color = regiao)) +
geom_line() +
labs(
title = "Taxa de Desocupação por Grande Região (PNAD Contínua)",
caption = "Fonte: IBGE (SIDRA) | Tabela 4093"
) +
theme_minimal()
ggplot(pnad_final_plot, aes(x = data, y = taxa_desemprego, color = regiao)) +
geom_line(linewidth = 1.1) +
scale_color_brewer() +
labs(
title = "Taxa de Desocupação por Grande Região (PNAD Contínua)",
subtitle = "Comparação Brasil, Nordeste e Sudeste (últimos 30 trimestres)",
y = "Taxa de Desocupação (%)",
x = "Trimestre (data aproximada)",
color = "Região",
caption = "Fonte: IBGE (SIDRA) | Tabela 4093"
) +
theme_minimal()
View(pnad_final_plot)
ggplot(pnad_final_plot, aes(x = data, y = taxa_desemprego, color = regiao)) +
geom_line(linewidth = 1.1) +
scale_color_brewer("Set2") +
labs(
title = "Taxa de Desocupação por Grande Região (PNAD Contínua)",
subtitle = "Período: 1º trimestre 2012 a 2º trimestre 2025",
y = "Taxa de Desocupação (%)",
x = "Trimestre (data aproximada)",
color = "Região",
caption = "Fonte: IBGE (SIDRA) | Tabela 4093"
) +
theme_minimal()
ggplot(pnad_final_plot, aes(x = data, y = taxa_desemprego, color = regiao)) +
geom_line(linewidth = 1.1) +
scale_color_brewer("Set2") +
geom_hline(yintercept = 0, linetype = "dashed", color = "gray") +
labs(
title = "Taxa de Desocupação por Grande Região (PNAD Contínua)",
subtitle = "Período: 1º trimestre 2012 a 2º trimestre 2025",
y = "Taxa de Desocupação (%)",
x = "Trimestre (data aproximada)",
color = "Região",
caption = "Fonte: IBGE (SIDRA) | Tabela 4093"
) +
theme_minimal()
ggplot(pnad_final_plot, aes(x = data, y = taxa_desemprego, color = regiao)) +
geom_line(linewidth = 1.1) +
scale_color_brewer("Set2") +
geom_hline(yintercept = 0, linetype = "dashed", color = "gray") +
labs(
title = "Taxa de Desocupação por Grande Região (PNAD Contínua)",
subtitle = "Período: 1º trimestre 2012 a 2º trimestre 2025",
y = "Taxa de Desocupação (%)",
x = "Trimestre (data aproximada)",
color = "Região",
caption = "Fonte: IBGE (SIDRA) | Tabela 4093"
) +
theme_minimal()
gc()
# 1. Defina os pacotes-chave para o minicurso.
#    O 'tidyverse' é um meta-pacote que já inclui
#    dplyr, ggplot2, readr, tidyr, etc.
pacotes_base <- c(
"tidyverse",  # Coletânea principal (dplyr, ggplot2, readr...)
"rmarkdown",  # Para relatórios (puxa knitr, htmltools...)
"readxl",     # Para ler arquivos Excel (.xls, .xlsx)
"jsonlite",   # Para ler dados em formato JSON
"httr",        # Para comunicação web/APIs
"litedown",
"sidrar",
"readxl",
"lubridate",
"stringr",
"tidyr"
)
# 1. A pasta onde o "Admin" salvará os .zip
#    (Usando tempdir() para ser fácil de limpar depois)
pasta_zips <- file.path(tempdir(), "R_Offline_Download")
if (!dir.exists(pasta_zips)) {
dir.create(pasta_zips)
}
# 2. A pasta onde o "Aluno" instalará os pacotes
minha_lib <- file.path(tempdir(), "R_Minicurso_Biblioteca")
if (!dir.exists(minha_lib)) {
dir.create(minha_lib)
}
cat(paste("[INFO] Os arquivos .zip serão baixados para:", pasta_zips, "\n\n"))
# 3. Obter a lista de TODOS os pacotes disponíveis no CRAN
#    (para a versão Windows binária)
db <- available.packages(type = "win.binary",
repos = "https://cran.rstudio.com/")
lista_deps <- tools::package_dependencies(pacotes_base,
db = db,
recursive = TRUE)
# 5. Criar a lista final de pacotes para baixar
#    (inclui os pacotes base + todas as dependências únicas)
pacotes_para_baixar <- unique(c(pacotes_base, unlist(lista_deps)))
download.packages(pacotes_para_baixar,
destdir = pasta_zips,
type = "win.binary") # Baixa os .zip para Windows
